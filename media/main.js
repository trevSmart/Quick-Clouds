(this["webpackJsonpqc2-writeoff-menu"]=this["webpackJsonpqc2-writeoff-menu"]||[]).push([[0],{10:function(e,s,t){"use strict";t.r(s);var i=t(1),c=t.n(i),a=t(4),n=t.n(a),l=(t(3),t(0));const r=(()=>{if("undefined"!==typeof window&&window.__vscodeApi)return window.__vscodeApi;if("function"===typeof acquireVsCodeApi){const e=acquireVsCodeApi();return"undefined"!==typeof window&&(window.__vscodeApi=e),e}return{postMessage:()=>{},getState:()=>({}),setState:()=>{}}})(),d=[{id:"Reason1",name:"Complex solution, requires refactoring"},{id:"Reason2",name:"Insufficient time to fix and test"},{id:"Reason3",name:"Complex to test and validate all situations"},{id:"Reason4",name:"False positive rule"},{id:"Reason5",name:"Others"}];var o=function(){const[e,s]=Object(i.useState)([]),[t,c]=Object(i.useState)([]),[a,n]=Object(i.useState)([]),[o,j]=Object(i.useState)(""),[u,b]=Object(i.useState)(""),[m,h]=Object(i.useState)(""),[O,v]=Object(i.useState)("all"),[p,x]=Object(i.useState)(""),[g,f]=Object(i.useState)("single"),[N,w]=Object(i.useState)(!1);Object(i.useEffect)((()=>{window.addEventListener("message",(e=>{const t=e.data;switch(t.command){case"WOdata":if(t.data){const e=JSON.parse(t.data);s(e.issues||[])}break;case"templatesData":n(JSON.parse(t.data))}})),r.postMessage({command:"webviewLoaded"}),r.postMessage({command:"getTemplates"})}),[]);const S=e.filter((e=>{const s="all"===O||e.severity.toLowerCase()===O.toLowerCase(),t=!p||e.issueType.toLowerCase().includes(p.toLowerCase());return s&&t})),y=S.reduce(((e,s)=>{const t=s.issueType||"Unknown";return e[t]||(e[t]=[]),e[t].push(s),e}),{}),k=e=>e?"severity-".concat(e.toLowerCase()):"severity-unknown";return Object(l.jsxs)("div",{className:"writeoff-container",children:[Object(l.jsxs)("div",{className:"header",children:[Object(l.jsx)("h1",{children:"Request write-off"}),Object(l.jsxs)("div",{className:"view-toggle",children:[Object(l.jsx)("button",{className:"single"===g?"active":"",onClick:()=>f("single"),children:"Single"}),Object(l.jsx)("button",{className:"bulk"===g?"active":"",onClick:()=>f("bulk"),children:"Bulk"})]})]}),Object(l.jsxs)("div",{className:"issues-section",children:[Object(l.jsxs)("div",{className:"filters",children:[Object(l.jsxs)("div",{className:"filter-group",children:[Object(l.jsx)("label",{children:"Filter by severity:"}),Object(l.jsxs)("select",{value:O,onChange:e=>v(e.target.value),children:[Object(l.jsx)("option",{value:"all",children:"All"}),Object(l.jsx)("option",{value:"High",children:"High"}),Object(l.jsx)("option",{value:"Medium",children:"Medium"}),Object(l.jsx)("option",{value:"Low",children:"Low"}),Object(l.jsx)("option",{value:"Warning",children:"Warning"})]})]}),Object(l.jsxs)("div",{className:"filter-group",children:[Object(l.jsx)("label",{children:"Filter by rule:"}),Object(l.jsx)("input",{type:"text",placeholder:"Search rules...",value:p,onChange:e=>x(e.target.value)})]})]}),"bulk"===g?Object(l.jsxs)("div",{className:"bulk-mode",children:[Object(l.jsxs)("div",{className:"bulk-header",children:[Object(l.jsxs)("h3",{children:["Select Issues (",t.length," selected)"]}),Object(l.jsx)("button",{onClick:()=>{if(0===t.length)return void alert("Please select at least one issue");if(!u.trim()||!m.trim())return void alert("Please provide both reason and description");const s=e.filter((e=>t.includes(e.id)));w(!0),r.postMessage({command:"bulkWriteoffRequest",data:{issues:s,reason:u.trim(),description:m.trim(),template:o}})},disabled:N||0===t.length,className:"bulk-submit-btn",children:N?"Processing...":"Submit ".concat(t.length," Write-offs")})]}),Object(l.jsx)("div",{className:"issues-list",children:Object.entries(y).map((e=>{let[s,i]=e;return Object(l.jsxs)("div",{className:"rule-group",children:[Object(l.jsxs)("div",{className:"rule-header",children:[Object(l.jsxs)("h4",{children:[s," (",i.length," issues)"]}),Object(l.jsx)("button",{onClick:()=>(e=>{const s=y[e]||[];if(s.every((e=>t.includes(e.id))))c((e=>e.filter((e=>!s.some((s=>s.id===e))))));else{const e=s.filter((e=>!t.includes(e.id))).map((e=>e.id));c((s=>[...s,...e]))}})(s),className:"select-all-btn",children:i.every((e=>t.includes(e.id)))?"Deselect All":"Select All"})]}),Object(l.jsx)("div",{className:"issues-grid",children:i.map((e=>Object(l.jsxs)("div",{className:"issue-item",children:[Object(l.jsx)("input",{type:"checkbox",checked:t.includes(e.id),onChange:s=>{return t=e.id,i=s.target.checked,void c(i?e=>[...e,t]:e=>e.filter((e=>e!==t)));var t,i}}),Object(l.jsxs)("div",{className:"issue-details",children:[Object(l.jsxs)("div",{className:"issue-line",children:["Line ",e.lineNumber]}),Object(l.jsx)("div",{className:"severity-badge ".concat(k(e.severity)),children:e.severity}),Object(l.jsx)("div",{className:"issue-element",children:e.elementName})]})]},e.id)))})]},s)}))})]}):Object(l.jsx)("div",{className:"single-mode",children:Object(l.jsx)("div",{className:"issues-list",children:S.map((e=>Object(l.jsxs)("div",{className:"issue-item-single",children:[Object(l.jsxs)("div",{className:"issue-details",children:[Object(l.jsxs)("div",{className:"issue-header",children:[Object(l.jsx)("span",{className:"severity-badge ".concat(k(e.severity)),children:e.severity}),Object(l.jsx)("span",{className:"issue-rule",children:e.issueType})]}),Object(l.jsxs)("div",{className:"issue-line",children:["Line ",e.lineNumber,": ",e.elementName]})]}),Object(l.jsx)("button",{onClick:()=>(e=>{u.trim()&&m.trim()?(w(!0),r.postMessage({command:"writeoffRequest",data:{...e,writeOff:{requestReason:u.trim(),requestDescription:m.trim(),requester:"User",requestedDate:(new Date).toISOString()}}})):alert("Please provide both reason and description")})(e),disabled:N,className:"single-submit-btn",children:N?"Processing...":"Request"})]},e.id)))})})]}),Object(l.jsxs)("div",{className:"writeoff-form",children:[Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Templates:"}),Object(l.jsxs)("select",{value:o,onChange:e=>(e=>{const s=a.find((s=>s.id===e));s&&(j(e),b(s.reason),h(s.description))})(e.target.value),children:[Object(l.jsx)("option",{value:"",children:"Select a template..."}),a.map((e=>Object(l.jsx)("option",{value:e.id,children:e.name},e.id)))]})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Reason:"}),Object(l.jsxs)("select",{value:u,onChange:e=>b(e.target.value),children:[Object(l.jsx)("option",{value:"",children:"Select a reason..."}),d.map((e=>Object(l.jsx)("option",{value:e.name,children:e.name},e.id)))]})]}),Object(l.jsxs)("div",{className:"form-group",children:[Object(l.jsx)("label",{children:"Description:"}),Object(l.jsx)("textarea",{value:m,onChange:e=>h(e.target.value),placeholder:"Detailed description",rows:"3"})]})]}),Object(l.jsx)("div",{className:"footer",children:Object(l.jsxs)("p",{children:["Selected: ",t.length," issues | Total: ",e.length," issues"]})})]})};n.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(o,{})}),document.getElementById("root"))},3:function(e,s,t){}},[[10,1,2]]]);
//# sourceMappingURL=main.7311a49b.chunk.js.map